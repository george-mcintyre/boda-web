<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test i18n Debug</title>
  <link rel="stylesheet" href="assets/css/i18n-selector.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    .test-container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .test-section {
      margin: 20px 0;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    .debug-info {
      background: #f0f0f0;
      padding: 10px;
      border-radius: 5px;
      font-family: monospace;
      font-size: 12px;
      margin: 10px 0;
    }
  </style>
  <script src="js/i18n-common.js"></script>
</head>
<body>
  <div class="test-container">
    <h1>Test i18n Debug</h1>
    
    <!-- Selector de idioma -->
    <div class="language-selector">
      <div class="language-selector-wrapper">
        <div class="language-selector-dropdown">
          <button class="language-selector-toggle" id="language-toggle" aria-label="Select language">
            <span class="current-language">
              <span class="flag">🇪🇸</span>
              <span class="name">Español</span>
            </span>
            <i class="fas fa-chevron-down"></i>
          </button>
          <div class="language-selector-menu" id="language-menu">
            <button class="language-option active" data-lang="es">
              <span class="flag">🇪🇸</span>
              <span class="name">Español</span>
              <i class="fas fa-check"></i>
            </button>
            <button class="language-option" data-lang="en">
              <span class="flag">🇺🇸</span>
              <span class="name">English</span>
            </button>
            <button class="language-option" data-lang="fr">
              <span class="flag">🇫🇷</span>
              <span class="name">Français</span>
            </button>

          </div>
        </div>
      </div>
    </div>

    <div class="test-section">
      <h2>Test Elements</h2>
      <p data-i18n="test:hello">Hello World</p>
      <p data-i18n="test:goodbye">Goodbye</p>
      <input type="text" data-i18n-placeholder="test:placeholder" placeholder="Enter text">
    </div>

    <div class="test-section">
      <h2>Debug Information</h2>
      <div id="debug-info" class="debug-info">
        Loading debug info...
      </div>
      <button onclick="updateDebugInfo()">Update Debug Info</button>
    </div>

    <div class="test-section">
      <h2>Manual Translation Test</h2>
      <button onclick="testTranslation()">Test Translation</button>
      <div id="translation-result" class="debug-info">
        Click button to test translation
      </div>
    </div>
  </div>

  <script>
    // Traducciones de prueba
    const testTranslations = {
      es: {
        'test:hello': 'Hola Mundo',
        'test:goodbye': 'Adiós',
        'test:placeholder': 'Ingresa texto'
      },
      en: {
        'test:hello': 'Hello World',
        'test:goodbye': 'Goodbye',
        'test:placeholder': 'Enter text'
      },
      fr: {
        'test:hello': 'Bonjour le Monde',
        'test:goodbye': 'Au revoir',
        'test:placeholder': 'Entrez du texte'
      },

    };

    // Hacer las traducciones disponibles globalmente
    window.currentTranslations = testTranslations;

    // Inicializar el sistema i18n
    document.addEventListener('DOMContentLoaded', () => {
      console.log('Initializing i18n system with test translations');
      const i18n = initI18n(testTranslations);
      console.log('i18n system initialized:', i18n);
      console.log('Current language:', i18n.getCurrentLanguage());
      
      // Actualizar información de debug
      updateDebugInfo();
    });

    function updateDebugInfo() {
      const debugInfo = document.getElementById('debug-info');
      const currentLang = localStorage.getItem('i18nextLng') || 'es';
      const translations = window.currentTranslations;
      
      debugInfo.innerHTML = `
        Current Language: ${currentLang}<br>
        Available Languages: ${Object.keys(translations).join(', ')}<br>
        Translations for current language: ${Object.keys(translations[currentLang] || {}).join(', ')}<br>
        window.currentTranslations exists: ${!!window.currentTranslations}<br>
        window.translate exists: ${!!window.translate}<br>
        Elements with data-i18n: ${document.querySelectorAll('[data-i18n]').length}<br>
        Elements with data-i18n-placeholder: ${document.querySelectorAll('[data-i18n-placeholder]').length}
      `;
    }

    function testTranslation() {
      const result = document.getElementById('translation-result');
      const currentLang = localStorage.getItem('i18nextLng') || 'es';
      
      const testKey = 'test:hello';
      const translation = window.translate(testKey);
      
      result.innerHTML = `
        Testing translation for key: ${testKey}<br>
        Current language: ${currentLang}<br>
        Translation result: ${translation}<br>
        Expected for ${currentLang}: ${window.currentTranslations[currentLang]?.[testKey] || 'NOT FOUND'}
      `;
    }
  </script>
</body>
</html>




