<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test i18n Simple - Boda de Iluminada & George</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      min-height: 100vh;
    }
    
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      width: 100%;
      margin-bottom: 30px;
    }
    
    .header-left {
      flex: 1;
    }
    
    .test-container {
      background: rgba(255, 255, 255, 0.1);
      padding: 30px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
      margin: 20px 0;
    }
    
    .test-section {
      margin: 20px 0;
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
    }
    
    .status {
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
    }
    
    .status.success { background: rgba(40, 167, 69, 0.3); }
    .status.error { background: rgba(220, 53, 69, 0.3); }
    .status.warning { background: rgba(255, 193, 7, 0.3); }
    
    .test-button {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
      transition: all 0.3s ease;
    }
    
    .test-button:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    .log {
      background: rgba(0, 0, 0, 0.3);
      padding: 15px;
      border-radius: 5px;
      font-family: monospace;
      font-size: 12px;
      max-height: 200px;
      overflow-y: auto;
      margin: 10px 0;
    }
    
    /* Estilos para el selector de idiomas */
    .language-selector {
      position: relative;
      margin-left: 20px;
      z-index: 1000;
    }
    
    .language-selector-wrapper {
      position: relative;
    }
    
    .language-selector-dropdown {
      position: relative;
      display: inline-block;
    }
    
    .language-selector-toggle {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      color: white;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      min-width: 120px;
    }
    
    .language-selector-toggle:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.3);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .language-selector-menu {
      position: absolute;
      top: 100%;
      right: 0;
      margin-top: 8px;
      background: white;
      border: 1px solid #e1e5e9;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
      backdrop-filter: blur(20px);
      min-width: 160px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1001;
      overflow: hidden;
    }
    
    .language-selector-menu.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    
    .language-option {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
      cursor: pointer;
      transition: all 0.2s ease;
      color: #333;
      font-size: 14px;
      font-weight: 500;
      border-bottom: 1px solid #f5f5f5;
    }
    
    .language-option:last-child {
      border-bottom: none;
    }
    
    .language-option:hover {
      background: #f8f9fa;
      color: #007bff;
    }
    
    .language-option.active {
      background: #e3f2fd;
      color: #1976d2;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="header-content">
    <div class="header-left">
      <h1>üß™ Test i18n Simple</h1>
      <p>Boda de Iluminada & George</p>
    </div>
    <div class="language-selector">
      <div class="language-selector-wrapper">
        <div class="language-selector-dropdown">
          <button class="language-selector-toggle" id="language-toggle" aria-label="Select language">
            <span class="current-language">
              <span class="flag">üá™üá∏</span>
              <span class="name">Espa√±ol</span>
            </span>
            <i class="fas fa-chevron-down"></i>
          </button>
          <div class="language-selector-menu" id="language-menu">
            <button class="language-option active" data-lang="es">
              <span class="flag">üá™üá∏</span>
              <span class="name">Espa√±ol</span>
              <i class="fas fa-check"></i>
            </button>
            <button class="language-option" data-lang="en">
              <span class="flag">üá∫üá∏</span>
              <span class="name">English</span>
            </button>
            <button class="language-option" data-lang="fr">
              <span class="flag">üá´üá∑</span>
              <span class="name">Fran√ßais</span>
            </button>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="test-container">
    <div class="test-section">
      <h2>üìä Estado del Sistema</h2>
      <div id="system-status" class="status warning">Inicializando...</div>
      <div id="language-status" class="status warning">Detectando idioma...</div>
    </div>

    <div class="test-section">
      <h2>üìù Pruebas de Traducci√≥n</h2>
      <p data-i18n="wedding:hero.title">¬°Te invitamos a celebrar nuestro amor!</p>
      <p data-i18n="wedding:hero.description">Descripci√≥n del h√©roe</p>
      <p data-i18n="common:days">D√≠as</p>
      <p data-i18n="common:hours">Horas</p>
    </div>

    <div class="test-section">
      <h2>üîß Pruebas de Funciones</h2>
      <button class="test-button" onclick="testChangeLanguage('en')">Cambiar a Ingl√©s</button>
      <button class="test-button" onclick="testChangeLanguage('fr')">Cambiar a Franc√©s</button>
      
      <button class="test-button" onclick="testChangeLanguage('es')">Cambiar a Espa√±ol</button>
      <button class="test-button" onclick="testFormatting()">Probar Formateo</button>
      <button class="test-button" onclick="testTranslation()">Probar Traducci√≥n</button>
    </div>

    <div class="test-section">
      <h2>üìã Log de Eventos</h2>
      <div id="event-log" class="log"></div>
    </div>

    <div class="test-section">
      <h2>üéØ Resultados de las Pruebas</h2>
      <div id="test-results"></div>
    </div>
  </div>

  <script>
    // Datos de traducci√≥n simples (sin archivos externos)
    const translations = {
      es: {
        'wedding:hero.title': '¬°Te invitamos a celebrar nuestro amor!',
        'wedding:hero.description': 'Despu√©s de 5 a√±os de amor y aventuras juntos, hemos decidido dar el paso m√°s importante de nuestras vidas.',
        'common:days': 'D√≠as',
        'common:hours': 'Horas',
        'common:minutes': 'Minutos',
        'common:seconds': 'Segundos',
        'common:welcome': 'Bienvenido, {{name}}!'
      },
      en: {
        'wedding:hero.title': 'We invite you to celebrate our love!',
        'wedding:hero.description': 'After 5 years of love and adventures together, we have decided to take the most important step of our lives.',
        'common:days': 'Days',
        'common:hours': 'Hours',
        'common:minutes': 'Minutes',
        'common:seconds': 'Seconds',
        'common:welcome': 'Welcome, {{name}}!'
      },
      fr: {
        'wedding:hero.title': 'Nous vous invitons √† c√©l√©brer notre amour !',
        'wedding:hero.description': 'Apr√®s 5 ans d\'amour et d\'aventures ensemble, nous avons d√©cid√© de faire le pas le plus important de nos vies.',
        'common:days': 'Jours',
        'common:hours': 'Heures',
        'common:minutes': 'Minutes',
        'common:seconds': 'Secondes',
        'common:welcome': 'Bienvenue, {{name}} !'
      },

    };

    // Configuraci√≥n de idiomas
    const languages = {
      es: { name: 'Espa√±ol', flag: 'üá™üá∏', rtl: false },
      en: { name: 'English', flag: 'üá∫üá∏', rtl: false },
      fr: { name: 'Fran√ßais', flag: 'üá´üá∑', rtl: false },

    };

    let currentLanguage = 'es';
    let testResults = [];
    let eventLog = [];

    function log(message, type = 'info') {
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = `[${timestamp}] ${type.toUpperCase()}: ${message}`;
      eventLog.push(logEntry);
      
      const logElement = document.getElementById('event-log');
      if (logElement) {
        logElement.innerHTML = eventLog.slice(-20).join('\n');
        logElement.scrollTop = logElement.scrollHeight;
      }
      
      console.log(logEntry);
    }

    function updateStatus(elementId, message, type = 'warning') {
      const element = document.getElementById(elementId);
      if (element) {
        element.textContent = message;
        element.className = `status ${type}`;
      }
    }

    function addTestResult(test, result, details = '') {
      testResults.push({ test, result, details, timestamp: new Date() });
      updateTestResults();
    }

    function updateTestResults() {
      const resultsElement = document.getElementById('test-results');
      if (resultsElement) {
        resultsElement.innerHTML = testResults.map(result => 
          `<div class="status ${result.result}">
            <strong>${result.test}</strong>: ${result.result === 'success' ? '‚úÖ' : '‚ùå'} 
            ${result.details ? `(${result.details})` : ''}
          </div>`
        ).join('');
      }
    }

    function translate(key, lang = currentLanguage) {
      const translation = translations[lang]?.[key];
      return translation || key;
    }

    function translateWithParams(key, params = {}, lang = currentLanguage) {
      let translation = translate(key, lang);
      
      Object.keys(params).forEach(param => {
        translation = translation.replace(`{{${param}}}`, params[param]);
      });
      
      return translation;
    }

    function updatePageContent() {
      document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = translate(key);
        if (translation !== key) {
          element.textContent = translation;
        }
      });
    }

    function updateLanguageSelector() {
      const toggle = document.getElementById('language-toggle');
      const menu = document.getElementById('language-menu');
      const currentLang = languages[currentLanguage];
      
      if (toggle) {
        toggle.innerHTML = `
          <span class="current-language">
            <span class="flag">${currentLang.flag}</span>
            <span class="name">${currentLang.name}</span>
          </span>
          <i class="fas fa-chevron-down"></i>
        `;
      }
      
      // Actualizar opciones activas
      document.querySelectorAll('.language-option').forEach(option => {
        const lang = option.getAttribute('data-lang');
        if (lang === currentLanguage) {
          option.classList.add('active');
        } else {
          option.classList.remove('active');
        }
      });
    }

    function updateDocumentDirection() {
      const isRTL = languages[currentLanguage].rtl;
      document.documentElement.dir = isRTL ? 'rtl' : 'ltr';
      document.documentElement.lang = currentLanguage;
    }

    async function changeLanguage(lang) {
      if (!languages[lang]) {
        log(`Idioma ${lang} no soportado`, 'error');
        return false;
      }

      try {
        currentLanguage = lang;
        
        // Guardar preferencia
        localStorage.setItem('i18nextLng', lang);
        
        // Actualizar direcci√≥n del documento
        updateDocumentDirection();
        
        // Actualizar contenido
        updatePageContent();
        
        // Actualizar selector
        updateLanguageSelector();
        
        // Disparar evento
        document.dispatchEvent(new CustomEvent('languageChanged', {
          detail: { language: lang, languageInfo: languages[lang] }
        }));
        
        log(`Idioma cambiado a: ${lang}`, 'success');
        return true;
      } catch (error) {
        log(`Error al cambiar idioma: ${error.message}`, 'error');
        return false;
      }
    }

    async function testChangeLanguage(lang) {
      try {
        log(`Intentando cambiar idioma a: ${lang}`);
        const success = await changeLanguage(lang);
        if (success) {
          addTestResult(`Cambio de idioma a ${lang}`, 'success');
        } else {
          addTestResult(`Cambio de idioma a ${lang}`, 'error');
        }
      } catch (error) {
        log(`Error en test de cambio de idioma: ${error.message}`, 'error');
        addTestResult(`Cambio de idioma a ${lang}`, 'error', error.message);
      }
    }

    function testFormatting() {
      try {
        log('Probando funciones de formateo...');
        
        // Formateo de n√∫meros
        const number = new Intl.NumberFormat(currentLanguage).format(1234.56);
        log(`N√∫mero formateado: ${number}`, 'info');
        
        // Formateo de fecha
        const date = new Intl.DateTimeFormat(currentLanguage).format(new Date());
        log(`Fecha formateada: ${date}`, 'info');
        
        // Formateo de moneda
        const currency = new Intl.NumberFormat(currentLanguage, {
          style: 'currency',
          currency: currentLanguage === 'en' ? 'USD' : 'EUR'
        }).format(150);
        log(`Moneda formateada: ${currency}`, 'info');
        
        addTestResult('Formateo de datos', 'success');
      } catch (error) {
        log(`Error en test de formateo: ${error.message}`, 'error');
        addTestResult('Formateo de datos', 'error', error.message);
      }
    }

    function testTranslation() {
      try {
        log('Probando traducciones...');
        
        const translation = translate('wedding:hero.title');
        log(`Traducci√≥n de wedding:hero.title: ${translation}`, 'info');
        
        const translationWithParams = translateWithParams('common:welcome', { name: 'Test' });
        log(`Traducci√≥n con par√°metros: ${translationWithParams}`, 'info');
        
        addTestResult('Traducciones', 'success');
      } catch (error) {
        log(`Error en test de traducciones: ${error.message}`, 'error');
        addTestResult('Traducciones', 'error', error.message);
      }
    }

    // Configurar event listeners
    document.addEventListener('DOMContentLoaded', () => {
      log('DOM cargado, inicializando sistema i18n simple...');
      
      // Configurar selector de idiomas
      const toggle = document.getElementById('language-toggle');
      const menu = document.getElementById('language-menu');
      
      if (toggle && menu) {
        toggle.addEventListener('click', (e) => {
          e.stopPropagation();
          menu.classList.toggle('show');
          toggle.setAttribute('aria-expanded', menu.classList.contains('show'));
        });
        
        // Cerrar al hacer clic fuera
        document.addEventListener('click', (e) => {
          if (!toggle.contains(e.target)) {
            menu.classList.remove('show');
            toggle.setAttribute('aria-expanded', 'false');
          }
        });
        
        // Opciones de idioma
        document.querySelectorAll('.language-option').forEach(option => {
          option.addEventListener('click', (e) => {
            e.preventDefault();
            const lang = option.getAttribute('data-lang');
            changeLanguage(lang);
            menu.classList.remove('show');
            toggle.setAttribute('aria-expanded', 'false');
          });
        });
      }
      
      // Cargar idioma preferido
      const savedLang = localStorage.getItem('i18nextLng');
      if (savedLang && languages[savedLang]) {
        currentLanguage = savedLang;
      }
      
      // Inicializar
      updateDocumentDirection();
      updatePageContent();
      updateLanguageSelector();
      
      log(`Sistema i18n simple inicializado, idioma: ${currentLanguage}`, 'success');
      updateStatus('system-status', 'Sistema i18n simple funcionando', 'success');
      updateStatus('language-status', `Idioma actual: ${currentLanguage}`, 'success');
      addTestResult('Inicializaci√≥n del sistema', 'success');
    });

    // Escuchar cambios de idioma
    document.addEventListener('languageChanged', (event) => {
      log(`Idioma cambiado a: ${event.detail.language}`, 'success');
      updateStatus('language-status', `Idioma actual: ${event.detail.language}`, 'success');
    });
  </script>
</body>
</html>





